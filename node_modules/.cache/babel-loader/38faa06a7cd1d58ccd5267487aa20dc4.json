{"ast":null,"code":"import defs from './defs';\nimport wkt from 'wkt-parser';\nimport projStr from './projString';\nimport match from './match';\nfunction testObj(code) {\n  return typeof code === 'string';\n}\nfunction testDef(code) {\n  return code in defs;\n}\nfunction testWKT(code) {\n  return code.indexOf('+') !== 0 && code.indexOf('[') !== -1 || typeof code === 'object' && !('srsCode' in code);\n}\nvar codes = ['3857', '900913', '3785', '102113'];\nfunction checkMercator(item) {\n  var auth = match(item, 'authority');\n  if (!auth) {\n    return;\n  }\n  var code = match(auth, 'epsg');\n  return code && codes.indexOf(code) > -1;\n}\nfunction checkProjStr(item) {\n  var ext = match(item, 'extension');\n  if (!ext) {\n    return;\n  }\n  return match(ext, 'proj4');\n}\nfunction testProj(code) {\n  return code[0] === '+';\n}\nfunction parse(code) {\n  if (testObj(code)) {\n    // check to see if this is a WKT string\n    if (testDef(code)) {\n      return defs[code];\n    }\n    if (testWKT(code)) {\n      var out = wkt(code);\n      // test of spetial case, due to this being a very common and often malformed\n      if (checkMercator(out)) {\n        return defs['EPSG:3857'];\n      }\n      var maybeProjStr = checkProjStr(out);\n      if (maybeProjStr) {\n        return projStr(maybeProjStr);\n      }\n      return out;\n    }\n    if (testProj(code)) {\n      return projStr(code);\n    }\n  } else if (!code.projName) {\n    return wkt(code);\n  } else {\n    return code;\n  }\n}\nexport default parse;","map":{"version":3,"names":["defs","wkt","projStr","match","testObj","code","testDef","testWKT","indexOf","codes","checkMercator","item","auth","checkProjStr","ext","testProj","parse","out","maybeProjStr","projName"],"sources":["D:/OneDrive/web/test/node_modules/proj4/lib/parseCode.js"],"sourcesContent":["import defs from './defs';\nimport wkt from 'wkt-parser';\nimport projStr from './projString';\nimport match from './match';\nfunction testObj(code) {\n  return typeof code === 'string';\n}\nfunction testDef(code) {\n  return code in defs;\n}\nfunction testWKT(code) {\n  return (code.indexOf('+') !== 0 && code.indexOf('[') !== -1) || (typeof code === 'object' && !('srsCode' in code));\n}\nvar codes = ['3857', '900913', '3785', '102113'];\nfunction checkMercator(item) {\n  var auth = match(item, 'authority');\n  if (!auth) {\n    return;\n  }\n  var code = match(auth, 'epsg');\n  return code && codes.indexOf(code) > -1;\n}\nfunction checkProjStr(item) {\n  var ext = match(item, 'extension');\n  if (!ext) {\n    return;\n  }\n  return match(ext, 'proj4');\n}\nfunction testProj(code) {\n  return code[0] === '+';\n}\nfunction parse(code) {\n  if (testObj(code)) {\n    // check to see if this is a WKT string\n    if (testDef(code)) {\n      return defs[code];\n    }\n    if (testWKT(code)) {\n      var out = wkt(code);\n      // test of spetial case, due to this being a very common and often malformed\n      if (checkMercator(out)) {\n        return defs['EPSG:3857'];\n      }\n      var maybeProjStr = checkProjStr(out);\n      if (maybeProjStr) {\n        return projStr(maybeProjStr);\n      }\n      return out;\n    }\n    if (testProj(code)) {\n      return projStr(code);\n    }\n  } else if (!code.projName) {\n    return wkt(code);\n  } else {\n    return code;\n  }\n}\n\nexport default parse;\n"],"mappings":"AAAA,OAAOA,IAAI,MAAM,QAAQ;AACzB,OAAOC,GAAG,MAAM,YAAY;AAC5B,OAAOC,OAAO,MAAM,cAAc;AAClC,OAAOC,KAAK,MAAM,SAAS;AAC3B,SAASC,OAAOA,CAACC,IAAI,EAAE;EACrB,OAAO,OAAOA,IAAI,KAAK,QAAQ;AACjC;AACA,SAASC,OAAOA,CAACD,IAAI,EAAE;EACrB,OAAOA,IAAI,IAAIL,IAAI;AACrB;AACA,SAASO,OAAOA,CAACF,IAAI,EAAE;EACrB,OAAQA,IAAI,CAACG,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,IAAIH,IAAI,CAACG,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,IAAM,OAAOH,IAAI,KAAK,QAAQ,IAAI,EAAE,SAAS,IAAIA,IAAI,CAAE;AACpH;AACA,IAAII,KAAK,GAAG,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,EAAE,QAAQ,CAAC;AAChD,SAASC,aAAaA,CAACC,IAAI,EAAE;EAC3B,IAAIC,IAAI,GAAGT,KAAK,CAACQ,IAAI,EAAE,WAAW,CAAC;EACnC,IAAI,CAACC,IAAI,EAAE;IACT;EACF;EACA,IAAIP,IAAI,GAAGF,KAAK,CAACS,IAAI,EAAE,MAAM,CAAC;EAC9B,OAAOP,IAAI,IAAII,KAAK,CAACD,OAAO,CAACH,IAAI,CAAC,GAAG,CAAC,CAAC;AACzC;AACA,SAASQ,YAAYA,CAACF,IAAI,EAAE;EAC1B,IAAIG,GAAG,GAAGX,KAAK,CAACQ,IAAI,EAAE,WAAW,CAAC;EAClC,IAAI,CAACG,GAAG,EAAE;IACR;EACF;EACA,OAAOX,KAAK,CAACW,GAAG,EAAE,OAAO,CAAC;AAC5B;AACA,SAASC,QAAQA,CAACV,IAAI,EAAE;EACtB,OAAOA,IAAI,CAAC,CAAC,CAAC,KAAK,GAAG;AACxB;AACA,SAASW,KAAKA,CAACX,IAAI,EAAE;EACnB,IAAID,OAAO,CAACC,IAAI,CAAC,EAAE;IACjB;IACA,IAAIC,OAAO,CAACD,IAAI,CAAC,EAAE;MACjB,OAAOL,IAAI,CAACK,IAAI,CAAC;IACnB;IACA,IAAIE,OAAO,CAACF,IAAI,CAAC,EAAE;MACjB,IAAIY,GAAG,GAAGhB,GAAG,CAACI,IAAI,CAAC;MACnB;MACA,IAAIK,aAAa,CAACO,GAAG,CAAC,EAAE;QACtB,OAAOjB,IAAI,CAAC,WAAW,CAAC;MAC1B;MACA,IAAIkB,YAAY,GAAGL,YAAY,CAACI,GAAG,CAAC;MACpC,IAAIC,YAAY,EAAE;QAChB,OAAOhB,OAAO,CAACgB,YAAY,CAAC;MAC9B;MACA,OAAOD,GAAG;IACZ;IACA,IAAIF,QAAQ,CAACV,IAAI,CAAC,EAAE;MAClB,OAAOH,OAAO,CAACG,IAAI,CAAC;IACtB;EACF,CAAC,MAAM,IAAI,CAACA,IAAI,CAACc,QAAQ,EAAE;IACzB,OAAOlB,GAAG,CAACI,IAAI,CAAC;EAClB,CAAC,MAAM;IACL,OAAOA,IAAI;EACb;AACF;AAEA,eAAeW,KAAK","ignoreList":[]},"metadata":{},"sourceType":"module"}